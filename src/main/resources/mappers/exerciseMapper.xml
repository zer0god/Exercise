<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.exercise.mappers.exercise">
	
	<!-- 이메일 중복체크 SQL -->
	<select id="emailCheck" resultType="string">
		SELECT 	user_email
		FROM 	USERS
		WHERE	user_email = #{user_email}
	</select>
	
	<!-- 닉네임 중복체크 SQL -->
	<select id="nameCheck" resultType="string">
		SELECT 	user_name
		FROM 	USERS
		WHERE	user_name = #{user_name}
	</select>
	
	<!-- 회원가입 SQL -->
	<insert id="join">
		INSERT INTO USERS
		VALUES	(
				#{user_email}, #{user_name}, #{user_pw}, 
				#{user_gender}, #{user_phone}, null
				)
	</insert>
	
	<!-- 이메일 인증번호 불러오기 SQL-->
	<select id="getAuthmail" resultType="int">
		SELECT auth_mail
		FROM AUTHMAIL
		WHERE user_email =  #{user_email}
	</select>
	
	<!-- 이메일 인증번호 저장 SQL-->
	<insert id="setAuthmail">
		INSERT INTO AUTHMAIL
		VALUES (#{user_email}, #{auth_mail})
	</insert>
	
	<!-- 이메일 인증번호 수정 SQL -->
	<update id="resetAuthmail">
		UPDATE AUTHMAIL
		SET auth_mail = #{auth_mail}
		WHERE 	user_email = #{user_email}
	</update>
	
	<!-- 이메일 인증번호 삭제 SQL -->
	<delete id="deleteAuthmail">
		DELETE FROM AUTHMAIL
		WHERE 	user_email = #{user_email}
	</delete>
	

</mapper>